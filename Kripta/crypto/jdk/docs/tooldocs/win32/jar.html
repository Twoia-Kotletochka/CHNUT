<html>
<head>
<title>jar-The Java Archive Tool</title>
<!-- Created by: Susan Keohan 30-Oct-1996 -->
<!-- Updated by: Beth Stearns 18-Nov-1996 -->
<!-- Updated by: Marianne Mueller 11-Dec-1996 -->
</head>

<BODY BGCOLOR="#FFFFFF">

<H1>jar-The Java Archive Tool</H1>
<blockquote>
Combines multiple files into a single JAR archive file.
</blockquote>

<h2>SYNOPSIS</h2>
<blockquote>
<pre>

<strong>jar</strong> [ <a href="jar.html#Options">options</a> ] [manifest] destination input-file [input-files]

</pre>
</blockquote>

<H2>DESCRIPTION</H2>
<blockquote>

The <b>jar</b> tool is a java application that combines multiple files
into a single JAR archive file. <b>jar</b> is a general-purpose
archiving and compression tool, based on ZIP and the <A
HREF="http://www.cdrom.com/pub/infozip/zlib/">ZLIB</A> compression format.

However, <b>jar</b> was designed mainly to facilitate the packaging of
java applets or applications into a single archive.  When the
components of an applet or application (.class files, images and
sounds) are combined into a single archive, they may be downloaded by
a java agent (like a browser) in a single HTTP transaction, rather
than requiring a new connection for each piece.  This dramatically
improves download times.  <b>jar</b> also compresses files and so further
improves download time. In addition, it allows individual entries in a
file to be signed by the applet author so that their origin can be
authenticated. The syntax for the jar tool is almost identical to the
syntax for the <code>tar</code> command.   A <b>jar</b> archive can be 
use as a <a href="classpath.html">class path</a> entry, whether it 
is compressed or not.

<p>

The 3 types of input files for the jar tool are

<ul> 
<li> manifest file (optional)
<li> destination jar file 
<li> files to be archived 
</ul>

<p>

Typical usage is

<pre>
	% jar cf myjarfile *.class 
</pre>

In this example, all the class files in the current directory are
placed into the file named "myjarfile".  A manifest file is
automatically generated by the jar tool and is always the first entry
in the jar file.  By default, it is named META-INF/MANIFEST.MF.  The
manifest file is the place where any meta-information about the
archive is stored.  Refer to the <a
href="../../guide/jar/jar.html#JAR Manifest">Jar file specification</a> for
details about how meta-information is stored in the manifest file.

<p>

If you have a pre-existing manifest file that you want the jar tool to
use for the new jar archive, you can specify it using the -m option:

<pre>
	% jar cmf myManifestFile myJarFile *.class
</pre>

<p>
Be sure that any pre-existing manifest file that you use ends with a 
new line.  The last line of a manifest file will not be parsed if it 
doesn't end with a new line character. 
Note that when you specify "cfm" instead of "cmf" (i.e., you
invert the order of the "m" and "f" options), you need to specify the
name of the jar archive first, followed by the name of the manifest
file:

<pre>
	% jar cfm myJarFile myManifestFile *.class
</pre>

<p>

The manifest uses RFC822 ascii format, so it is easy to view and process 
the manifest-file contents.

<P>Beginning with version 1.3 of the Java 2 SDK, the <TT>jar</TT> utility 
supports <b><TT><a href="../../guide/jar/jar.html#JAR Index">JarIndex</a></TT></b>,
which allows application class loaders to load classes efficiently from
jar files. If an application or applet is bundled into multiple jar 
files,&nbsp;
only the necessary jar files will be downloaded and opened to load classes.
This performance optimization is enabled by running <TT>jar </TT>with the
new <TT>-i </TT>option. It will generate package location information for
the specified main jar file and all the jar files it depends on, which
need to be specified in the <TT>Class-Path</TT> attribute of the main jar
file's manifest.

<blockquote><pre>
% jar -i main.jar
</pre></blockquote>

<P>In this example, and INDEX.LIST file is inserted into the META-INF directory
of main.jar's manifest.
<BR>The application class loader will use the information stored in this
file for efficient class loading.&nbsp; Refer to the JarIndex specification
for details about how location information is stored in the index file.

<p>
Examples of using the Jar tool to operate on Jar files and Jar file 
manifests are provided <a href=#examples>below</a> 
and in the Jar trail of the <a href="http://java.sun.com/docs/books/tutorial/jar">Java Tutorial</a>.
</blockquote>

<a name=Options>
<h2>OPTIONS</h2>
</a>
<blockquote>
You can use an argument beginning with the character '<tt>@</tt>' to 
specify a file containing additional arguments, one argument per line. 
These arguments are inserted into the command line at the position 
of the '<tt>@&lt;filename&gt;</tt>' argument.
<p>
  <dl> 
    <dt><b><code>c </code></b> 
    <dd> Creates a new or empty archive on the standard output. 
      <p> 
    <dt><b><code>t </code></b> 
    <dd> Lists the table of contents from standard output. 
      <p> 
    <dt><b><code>x </code></b><var>file</var> 
    <dd> Extracts all files, or just the named files, from standard input. If 
      <var>file</var> is omitted, then all files are extracted; otherwise, only 
      the specified file or files are extracted. 
      <p> 
    <dt><b><code>f </code></b> 
    <dd> The second argument specifies a jar file to process. In the case of <b><code>c</code></b>reation, 
      this refers to the name of the jar file to be created (instead of on stdout). 
      For <b><code>t</code></b>able or <b><code>x</code></b>tract, the second 
      argument identifies the jar file to be listed or extracted. 
      <p> 
    <dt><b><code>v </code></b> 
    <dd> Generates verbose output on stderr. 
      <p> 
    <dt><b><code>m </code></b> 
    <dd> Includes manifest information from specified pre-existing manifest file. 
      Example use: 
      <blockquote>
        <pre>
jar cmf myManifestFile myJarFile *.class
</pre>
      </blockquote>
      You can add special-purpose name-value attribute headers to the manifest 
      file that aren't contained in the default manifest. Examples of such headers 
      would be those for vendor information, version information, package sealing, 
      and headers to make JAR-bundled applications executable. See the <a href="http://java.sun.com/docs/books/tutorial/jar/">JAR 
      Files</a> trail in the Java Tutorial and the Runtime Environment's <a href="http://java.sun.com/products/jdk/1.2/runtime.html#example">Notes 
for Developers</a> web page for examples of using the <tt><b>m</b></tt> 
      option. 
      <p> 
    <dt><b><code>0 </code></b> 
    <dd> Store only, without using ZIP compression.
      <p> 
    <dt><b><code>M </code></b> 
    <dd> Do not create a manifest file for the entries. 
      <p> 
    <dt><b><code>u </code></b> 
    <dd> Update an existing JAR file by adding files or changing the manifest. 
      For example, 
      <blockquote> 
        <pre>
jar uf foo.jar foo.class
</pre>
      </blockquote>
      would add the file <tt>foo.class</tt> to the existing JAR file <tt>foo.jar</tt>, 
      and 
      <blockquote>
        <pre>
jar umf manifest foo.jar
</pre>
      </blockquote>
      would update <tt>foo.jar</tt>'s manifest with the information in <tt>manifest</tt>. 

<DT>
<B><TT>i</TT></B>
<DD>Generate index information for the specified jar file and its 
dependent jar files. For example,

<blockquote><pre>jar -i foo.jar</pre></blockquote>

<P>would generate an <TT>INDEX.LIST</TT> file in <TT>foo.jar</TT> which
contains location information for each package in <TT>foo.jar</TT> and
all the jar files specified in <TT>foo.jar</TT>'s <TT>Class-Path</TT> 
attribute.

      <p> 
    <dt><b><code>-C </code></b> 
    <dd> Temporaily changes directories during execution of <tt>jar</tt> command 
while processing the next argument. For example,

<BLOCKQUOTE>
<PRE>jar uf foo.jar -C classes bar.class</PRE>
</BLOCKQUOTE>
would change to the <tt>classes</tt> directory and add the <tt>bar.class</tt> 
from that directory to <tt>foo.jar</tt>. The following command,
<BLOCKQUOTE>
<PRE>jar uf foo.jar -C classes . -C bin xyz.class</PRE>
</BLOCKQUOTE>
would change to the <tt>classes</tt> directory and add to <tt>foo.jar</tt> all f
iles within the <TT>classes</TT> directory, but not the
classes directory itself, and then change to the <tt>bin</tt> directory 
and add <tt>xyz.class</tt> to <tt>foo.jar</tt>.</DL>
</blockquote>

If any of <code>"files"</code> is a directory, then that directory is processed recursively.
<P>
<a name=examples><h2>EXAMPLES</h2></a>
<blockquote>
<P><P>
To add all the files in a particular directory to an archive:
<PRE>
C:\WWWROOT\JAVA&gt; ls
12/09/96  12:20a        &lt;DIR&gt;          .    
12/09/96  12:17a        &lt;DIR&gt;          ..  
12/09/96  12:18a                 1,010 0.au
12/09/96  12:18a                   946 1.au
12/09/96  12:18a                 1,039 2.au
12/09/96  12:18a                   993 3.au
12/09/96  12:18a                 1,006 4.au
12/09/96  12:18a                 1,016 5.au
12/09/96  12:18a                 1,048 6.au
12/09/96  12:18a                   980 7.au
12/09/96  12:18a                 1,064 8.au
12/09/96  12:18a                   989 9.au  
12/09/96  12:19a                48,072 spacemusic.au
12/09/96  12:19a                   527 at_work.gif
12/09/96  12:19a                12,818 monkey.jpg
12/09/96  12:19a                16,242 Animator.class
12/09/96  12:20a                 3,368 Wave.class
              17 File(s)         91,118 bytes
                            414,983,168 bytes free

C:\WWWROOT\JAVA&gt; jar cvf bundle.jar *
adding: 0.au
adding: 1.au
adding: 2.au
adding: 3.au
adding: 4.au
adding: 5.au
adding: 6.au
adding: 7.au
adding: 8.au
adding: 9.au
adding: Animator.class
adding: Wave.class
adding: at_work.gif
adding: monkey.jpg
adding: spacemusic.au
C:\WWWROOT\JAVA&gt;
</PRE>
If you already have subdirectories for images, audio files and classes in 
your html directory, you might jar up each directory into a single jar file:
<PRE>
C:\WWWROOT\JAVA&gt; DIR
12/09/96  12:11a        &lt;DIR&gt;          .
12/09/96  12:17a        &lt;DIR&gt;          ..
12/03/96  06:54p        &lt;DIR&gt;          audio
12/06/96  02:02p        &lt;DIR&gt;          images
12/09/96  12:10a        &lt;DIR&gt;          classes
               6 File(s)        207,360 bytes
                            414,983,168 bytes free

C:\WWWROOT\JAVA&gt; jar cvf bundle.jar audio classes images
adding: audio/1.au
adding: audio/2.au
adding: audio/3.au
adding: audio/spacemusic.au
adding: classes/Animator.class
adding: classes/Wave.class
adding: images/monkey.jpg
adding: images/at_work.gif
C:\WWWROOT\JAVA\Animator&gt; dir
12/09/96  12:11a        &lt;DIR&gt;          .
12/09/96  12:17a        &lt;DIR&gt;          ..
12/09/96  12:11a               207,360 bundle.jar
12/03/96  06:54p        &lt;DIR&gt;          audio
12/06/96  02:02p        &lt;DIR&gt;          images
12/09/96  12:10a        &lt;DIR&gt;          classes
               6 File(s)        207,360 bytes
                            414,983,168 bytes free

C:\WWWROOT\JAVA\Animator&gt; 
</PRE>
You can then see the entry names in the jarfile using the jar tool and the 
"t" option:
<PRE>
C:\WWWROOT\JAVA\Animator&gt; jar tf bundle.jar
META-INF/MANIFEST.MF
audio/1.au
audio/2.au
audio/3.au
audio/spacemusic.au
classes/Animator.class
classes/Wave.class
images/monkey.jpg
images/at_work.gif
C:\WWWROOT\JAVA\Animator&gt; 
</PRE>
Enumerating verbosely (with the "v" option) will tell you more information 
about the files in the archive, such as their size and last modified date:

<PRE>
C:\WWWROOT\JAVA\Animator&gt; jar tvf bundle.jar
   145 Thu Aug 01 22:27:00 PDT 1996 META-INF/MANIFEST.MF
   946 Thu Aug 01 22:24:22 PDT 1996 audio/1.au
  1039 Thu Aug 01 22:24:22 PDT 1996 audio/2.au
   993 Thu Aug 01 22:24:22 PDT 1996 audio/3.au
 48072 Thu Aug 01 22:24:23 PDT 1996 audio/spacemusic.au
 16711 Thu Aug 01 22:25:50 PDT 1996 classes/Animator.class
  3368 Thu Aug 01 22:26:02 PDT 1996 classes/Wave.class
 12809 Thu Aug 01 22:24:48 PDT 1996 images/monkey.jpg
   527 Thu Aug 01 22:25:20 PDT 1996 images/at_work.gif
C:\WWWROOT\JAVA\Animator&gt;
</PRE>
<p>
If you bundled a stock trade application(applet) into the following jar files:

<PRE><TT>main.jar buy.jar sell.jar other.jar</TT></PRE>

and you specified in the Class-Path attribute in main.jar's manifest as:

<PRE><TT>Class-Path: buy.jar sell.jar other.jar</TT></PRE>

Then you can use the -i option to speed up your application's class loading time:

<PRE>$ jar -i main.jar</PRE>

an INDEX.LIST file is inserted to the META-INF directory which will enable the application class loader to download the right jar files when it is searching for classes or resources.
<h2>SEE ALSO</h2>
<blockquote>
<a href="../../guide/jar/jarGuide.html">The Jar Overview</a><BR>
<A href="../../guide/jar/jar.html">The Jar File Specification</A><br>
<A HREF="../../guide/jar/jar.html#JAR Index">The JarIndex Spec</A><br>
<a href="http://java.sun.com/docs/books/tutorial/jar">Java Tutorial</a> on 
the Java Software web site.
</blockquote>


</blockquote></body></html>
